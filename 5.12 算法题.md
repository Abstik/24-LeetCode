## [1387. 将整数按权重排序](https://leetcode.cn/problems/sort-integers-by-the-power-value/)

![image-20250512175833086](https://jiajixi-0.oss-cn-beijing.aliyuncs.com/image-20250512175833086.png)



```go
var memo = map[int]int{} // 存储已计算过权重
func dfs(i int) int {
	if i == 1 {
		return 0 // 1的权重为0
	}
	if res, ok := memo[i]; ok {
		return res // 记忆化避免重复
	}
	if i%2 == 1 {
		// 奇数情况：直接计算两步后的结果（i*3+1必为偶，直接除以2）
		memo[i] = dfs((i*3+1)/2) + 2
	} else {
		// 偶数情况：直接除以2再累加1步
		memo[i] = dfs(i/2) + 1
	}
	return memo[i]
}

func getKth(lo, hi, k int) int {
	nums := make([]int, hi-lo+1)
	for i := range nums {
		nums[i] = i + lo
	}

	slices.SortStableFunc(nums, func(x, y int) int {
		return dfs(x) - dfs(y) // 比较函数基于记忆化DFS结果
	})

	return nums[k-1]
}
```



## [397. 整数替换](https://leetcode.cn/problems/integer-replacement/)

![image-20250512182202755](https://jiajixi-0.oss-cn-beijing.aliyuncs.com/image-20250512182202755.png)



```go
func integerReplacement(n int) int {
	queue := []int{int(n)} // 初始化队列
	step := 0              // 记录当前步数

	// 层序遍历
	for len(queue) > 0 {
		size := len(queue)
		for i := 0; i < size; i++ {
			current := queue[0]
			queue = queue[1:]

			if current == 1 {
				return step
			}

			if current%2 == 0 {
				queue = append(queue, current/2) // 偶数节点直接除以2
			} else {
				queue = append(queue, current+1, current-1) // 奇数节点扩展为+1和-1两个分支
			}
		}
		step++
	}
	return 0
}
```